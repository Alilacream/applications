{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nfunction _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nvar _require = require(\"../doc-utils.js\"),\n  chunkBy = _require.chunkBy,\n  last = _require.last,\n  isParagraphStart = _require.isParagraphStart,\n  isModule = _require.isModule,\n  pushArray = _require.pushArray,\n  isParagraphEnd = _require.isParagraphEnd,\n  isContent = _require.isContent,\n  startsWith = _require.startsWith,\n  isTagEnd = _require.isTagEnd,\n  isTagStart = _require.isTagStart,\n  getSingleAttribute = _require.getSingleAttribute,\n  setSingleAttribute = _require.setSingleAttribute;\nvar filetypes = require(\"../filetypes.js\");\nvar wrapper = require(\"../module-wrapper.js\");\nvar moduleName = \"loop\";\nfunction hasContent(parts) {\n  return parts.some(function (part) {\n    return isContent(part);\n  });\n}\nfunction getFirstMeaningFulPart(parsed) {\n  for (var _i2 = 0; _i2 < parsed.length; _i2++) {\n    var part = parsed[_i2];\n    if (part.type !== \"content\") {\n      return part;\n    }\n  }\n  return null;\n}\nfunction isInsideParagraphLoop(part) {\n  var firstMeaningfulPart = getFirstMeaningFulPart(part.subparsed);\n  return firstMeaningfulPart != null && firstMeaningfulPart.tag !== \"w:t\";\n}\nfunction getPageBreakIfApplies(part) {\n  return part.hasPageBreak && isInsideParagraphLoop(part) ? '<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>' : \"\";\n}\nfunction isEnclosedByParagraphs(parsed) {\n  return parsed.length && isParagraphStart(parsed[0]) && isParagraphEnd(last(parsed));\n}\nfunction getOffset(chunk) {\n  return hasContent(chunk) ? 0 : chunk.length;\n}\nfunction addPageBreakAtEnd(subRendered) {\n  var j = subRendered.parts.length - 1;\n  if (subRendered.parts[j] === \"</w:p>\") {\n    subRendered.parts.splice(j, 0, '<w:r><w:br w:type=\"page\"/></w:r>');\n  } else {\n    subRendered.parts.push('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n  }\n}\nfunction addPageBreakAtBeginning(subRendered) {\n  subRendered.parts.unshift('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n}\nfunction isContinuous(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf(\"continuous\") !== -1;\n  });\n}\nfunction isNextPage(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf('w:val=\"nextPage\"') !== -1;\n  });\n}\nfunction addSectionBefore(parts, sect) {\n  return pushArray([\"<w:p><w:pPr>\".concat(sect.map(function (_ref) {\n    var value = _ref.value;\n    return value;\n  }).join(\"\"), \"</w:pPr></w:p>\")], parts);\n}\nfunction addContinuousType(parts) {\n  var stop = false;\n  var inSectPr = false;\n  var result = [];\n  for (var _i4 = 0; _i4 < parts.length; _i4++) {\n    var part = parts[_i4];\n    if (stop === false && startsWith(part, \"<w:sectPr\")) {\n      inSectPr = true;\n    }\n    if (inSectPr) {\n      if (startsWith(part, \"<w:type\")) {\n        stop = true;\n      }\n      if (stop === false && startsWith(part, \"</w:sectPr\")) {\n        result.push('<w:type w:val=\"continuous\"/>');\n      }\n    }\n    result.push(part);\n  }\n  return result;\n}\nfunction dropHeaderFooterRefs(parts) {\n  return parts.filter(function (text) {\n    return !startsWith(text, \"<w:headerReference\") && !startsWith(text, \"<w:footerReference\");\n  });\n}\nfunction hasPageBreak(chunk) {\n  return chunk.some(function (part) {\n    return part.tag === \"w:br\" && part.value.indexOf('w:type=\"page\"') !== -1;\n  });\n}\nfunction hasImage(chunk) {\n  return chunk.some(function (_ref2) {\n    var tag = _ref2.tag;\n    return tag === \"w:drawing\";\n  });\n}\nfunction getSectPr(chunks) {\n  var collectSectPr = false;\n  var sectPrs = [];\n  for (var _i6 = 0; _i6 < chunks.length; _i6++) {\n    var part = chunks[_i6];\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPrs.push([]);\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      sectPrs[sectPrs.length - 1].push(part);\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  }\n  return sectPrs;\n}\nfunction getSectPrHeaderFooterChangeCount(chunks) {\n  var collectSectPr = false;\n  var sectPrCount = 0;\n  for (var _i8 = 0; _i8 < chunks.length; _i8++) {\n    var part = chunks[_i8];\n    if (isTagStart(\"w:sectPr\", part)) {\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      if (part.tag === \"w:headerReference\" || part.tag === \"w:footerReference\") {\n        sectPrCount++;\n        collectSectPr = false;\n      }\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  }\n  return sectPrCount;\n}\nfunction getLastSectPr(parsed) {\n  var sectPr = [];\n  var inSectPr = false;\n  for (var i = parsed.length - 1; i >= 0; i--) {\n    var part = parsed[i];\n    if (isTagEnd(\"w:sectPr\", part)) {\n      inSectPr = true;\n    }\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPr.unshift(part.value);\n      inSectPr = false;\n    }\n    if (inSectPr) {\n      sectPr.unshift(part.value);\n    }\n    if (isParagraphStart(part)) {\n      if (sectPr.length > 0) {\n        return sectPr.join(\"\");\n      }\n      break;\n    }\n  }\n  return \"\";\n}\nvar LoopModule = /*#__PURE__*/function () {\n  function LoopModule() {\n    _classCallCheck(this, LoopModule);\n    this.name = \"LoopModule\";\n    this.inXfrm = false;\n    this.totalSectPr = 0;\n    this.prefix = {\n      start: \"#\",\n      end: \"/\",\n      dash: /^-([^\\s]+)\\s(.+)/,\n      inverted: \"^\"\n    };\n  }\n  return _createClass(LoopModule, [{\n    key: \"optionsTransformer\",\n    value: function optionsTransformer(opts, docxtemplater) {\n      this.docxtemplater = docxtemplater;\n      return opts;\n    }\n  }, {\n    key: \"preparse\",\n    value: function preparse(parsed, _ref3) {\n      var contentType = _ref3.contentType;\n      if (filetypes.main.indexOf(contentType) !== -1) {\n        this.sects = getSectPr(parsed);\n      }\n    }\n  }, {\n    key: \"matchers\",\n    value: function matchers() {\n      var module = moduleName;\n      return [[this.prefix.start, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: false\n      }], [this.prefix.inverted, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: true\n      }], [this.prefix.end, module, {\n        location: \"end\"\n      }], [this.prefix.dash, module, function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 3),\n          expandTo = _ref5[1],\n          value = _ref5[2];\n        return {\n          location: \"start\",\n          inverted: false,\n          expandTo: expandTo,\n          value: value\n        };\n      }]];\n    }\n  }, {\n    key: \"getTraits\",\n    value: function getTraits(traitName, parsed) {\n      // Stryker disable all : because getTraits should disappear in v4\n      if (traitName !== \"expandPair\") {\n        return;\n      }\n      // Stryker restore all\n\n      var tags = [];\n      for (var offset = 0, len = parsed.length; offset < len; offset++) {\n        var part = parsed[offset];\n        if (isModule(part, moduleName) && part.subparsed == null) {\n          tags.push({\n            part: part,\n            offset: offset\n          });\n        }\n      }\n      return tags;\n    }\n  }, {\n    key: \"postparse\",\n    value: function postparse(parsed, _ref6) {\n      var basePart = _ref6.basePart;\n      if (basePart && this.docxtemplater.fileType === \"docx\" && parsed.length > 0) {\n        basePart.sectPrCount = getSectPrHeaderFooterChangeCount(parsed);\n        this.totalSectPr += basePart.sectPrCount;\n        var sects = this.sects;\n        sects.some(function (sect, index) {\n          if (basePart.lIndex < sect[0].lIndex) {\n            if (index + 1 < sects.length && isContinuous(sects[index + 1])) {\n              basePart.addContinuousType = true;\n            }\n            return true;\n          }\n          if (parsed[0].lIndex < sect[0].lIndex && sect[0].lIndex < basePart.lIndex) {\n            if (isNextPage(sects[index])) {\n              basePart.addNextPage = {\n                index: index\n              };\n            }\n            return true;\n          }\n        });\n        basePart.lastParagrapSectPr = getLastSectPr(parsed);\n      }\n      if (!basePart || basePart.expandTo !== \"auto\" || basePart.module !== moduleName || !isEnclosedByParagraphs(parsed)) {\n        return parsed;\n      }\n      basePart.paragraphLoop = true;\n      var level = 0;\n      var chunks = chunkBy(parsed, function (p) {\n        if (isParagraphStart(p)) {\n          level++;\n          if (level === 1) {\n            return \"start\";\n          }\n        }\n        if (isParagraphEnd(p)) {\n          level--;\n          if (level === 0) {\n            return \"end\";\n          }\n        }\n        return null;\n      });\n      var firstChunk = chunks[0];\n      var lastChunk = last(chunks);\n      var firstOffset = getOffset(firstChunk);\n      var lastOffset = getOffset(lastChunk);\n      basePart.hasPageBreakBeginning = hasPageBreak(firstChunk);\n      basePart.hasPageBreak = hasPageBreak(lastChunk);\n      if (hasImage(firstChunk)) {\n        firstOffset = 0;\n      }\n      if (hasImage(lastChunk)) {\n        lastOffset = 0;\n      }\n      return parsed.slice(firstOffset, parsed.length - lastOffset);\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(part, options) {\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var sm = options.scopeManager;\n      var promisedValue = sm.getValueAsync(part.value, {\n        part: part\n      });\n      var promises = [];\n      function loopOver(scope, i, length) {\n        var scopeManager = sm.createSubScopeManager(scope, part.value, i, part, length);\n        promises.push(options.resolve(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        })));\n      }\n      var errorList = [];\n      return promisedValue.then(function (values) {\n        values !== null && values !== void 0 ? values : values = options.nullGetter(part);\n        return new Promise(function (resolve) {\n          if (values instanceof Promise) {\n            return values.then(function (values) {\n              if (values instanceof Array) {\n                Promise.all(values).then(resolve);\n              } else {\n                resolve(values);\n              }\n            });\n          }\n          if (values instanceof Array) {\n            Promise.all(values).then(resolve);\n          } else {\n            resolve(values);\n          }\n        }).then(function (values) {\n          sm.loopOverValue(values, loopOver, part.inverted);\n          return Promise.all(promises).then(function (r) {\n            return r.map(function (_ref7) {\n              var resolved = _ref7.resolved,\n                errors = _ref7.errors;\n              pushArray(errorList, errors);\n              return resolved;\n            });\n          }).then(function (value) {\n            if (errorList.length > 0) {\n              throw errorList;\n            }\n            return value;\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render(part, options) {\n      if (part.tag === \"p:xfrm\") {\n        this.inXfrm = part.position === \"start\";\n      }\n      if (part.tag === \"a:ext\" && this.inXfrm) {\n        this.lastExt = part;\n        return part;\n      }\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var totalValue = [];\n      var errors = [];\n      var heightOffset = 0;\n      var self = this;\n      var firstTag = part.subparsed[0];\n      var tagHeight = 0;\n      if ((firstTag === null || firstTag === void 0 ? void 0 : firstTag.tag) === \"a:tr\") {\n        tagHeight = +getSingleAttribute(firstTag.value, \"h\");\n      }\n      heightOffset -= tagHeight;\n      var a16RowIdOffset = 0;\n      var insideParagraphLoop = isInsideParagraphLoop(part);\n      function loopOver(scope, i, length) {\n        heightOffset += tagHeight;\n        var scopeManager = options.scopeManager.createSubScopeManager(scope, part.value, i, part, length);\n        for (var _i0 = 0, _part$subparsed2 = part.subparsed; _i0 < _part$subparsed2.length; _i0++) {\n          var pp = _part$subparsed2[_i0];\n          if (isTagStart(\"a16:rowId\", pp)) {\n            var val = +getSingleAttribute(pp.value, \"val\") + a16RowIdOffset;\n            a16RowIdOffset = 1;\n            pp.value = setSingleAttribute(pp.value, \"val\", val);\n          }\n        }\n        var subRendered = options.render(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        }));\n        if (part.hasPageBreak && i === length - 1 && insideParagraphLoop) {\n          addPageBreakAtEnd(subRendered);\n        }\n        var isNotFirst = scopeManager.scopePathItem.some(function (i) {\n          return i !== 0;\n        });\n        if (isNotFirst) {\n          if (part.sectPrCount === 1) {\n            subRendered.parts = dropHeaderFooterRefs(subRendered.parts);\n          }\n          if (part.addContinuousType) {\n            subRendered.parts = addContinuousType(subRendered.parts);\n          }\n        } else if (part.addNextPage) {\n          subRendered.parts = addSectionBefore(subRendered.parts, self.sects[part.addNextPage.index]);\n        }\n        if (part.addNextPage) {\n          addPageBreakAtEnd(subRendered);\n        }\n        if (part.hasPageBreakBeginning && insideParagraphLoop) {\n          addPageBreakAtBeginning(subRendered);\n        }\n        for (var _i10 = 0, _subRendered$parts2 = subRendered.parts; _i10 < _subRendered$parts2.length; _i10++) {\n          var _val = _subRendered$parts2[_i10];\n          totalValue.push(_val);\n        }\n        pushArray(errors, subRendered.errors);\n      }\n      var value = options.scopeManager.getValue(part.value, {\n        part: part\n      });\n      value !== null && value !== void 0 ? value : value = options.nullGetter(part);\n      var result = options.scopeManager.loopOverValue(value, loopOver, part.inverted);\n      // if the loop is showing empty content\n      if (result === false) {\n        if (part.lastParagrapSectPr) {\n          if (part.paragraphLoop) {\n            return {\n              value: \"<w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr></w:p>\")\n            };\n          }\n          return {\n            value: \"</w:t></w:r></w:p><w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr><w:r><w:t>\")\n          };\n        }\n        return {\n          value: getPageBreakIfApplies(part) || \"\",\n          errors: errors\n        };\n      }\n      if (heightOffset !== 0) {\n        var cy = +getSingleAttribute(this.lastExt.value, \"cy\");\n        /*\n         * We do edit the value of a previous result here\n         * #edit-value-backwards\n         */\n        this.lastExt.value = setSingleAttribute(this.lastExt.value, \"cy\", cy + heightOffset);\n      }\n      return {\n        value: options.joinUncorrupt(totalValue, _objectSpread(_objectSpread({}, options), {}, {\n          basePart: part\n        })),\n        errors: errors\n      };\n    }\n  }]);\n}();\nmodule.exports = function () {\n  return wrapper(new LoopModule());\n};","map":{"version":3,"names":["_typeof","o","Symbol","iterator","constructor","prototype","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","call","slice","name","Array","from","test","n","l","i","u","f","next","done","isArray","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","toPrimitive","String","Number","_require","require","chunkBy","last","isParagraphStart","isModule","pushArray","isParagraphEnd","isContent","startsWith","isTagEnd","isTagStart","getSingleAttribute","setSingleAttribute","filetypes","wrapper","moduleName","hasContent","parts","some","part","getFirstMeaningFulPart","parsed","_i2","type","isInsideParagraphLoop","firstMeaningfulPart","subparsed","tag","getPageBreakIfApplies","hasPageBreak","isEnclosedByParagraphs","getOffset","chunk","addPageBreakAtEnd","subRendered","j","splice","addPageBreakAtBeginning","unshift","isContinuous","indexOf","isNextPage","addSectionBefore","sect","concat","map","_ref","join","addContinuousType","stop","inSectPr","result","_i4","dropHeaderFooterRefs","text","hasImage","_ref2","getSectPr","chunks","collectSectPr","sectPrs","_i6","getSectPrHeaderFooterChangeCount","sectPrCount","_i8","getLastSectPr","sectPr","LoopModule","inXfrm","totalSectPr","prefix","start","end","dash","inverted","optionsTransformer","opts","docxtemplater","preparse","_ref3","contentType","main","sects","matchers","module","expandTo","location","_ref4","_ref5","getTraits","traitName","tags","offset","len","postparse","_ref6","basePart","fileType","index","lIndex","addNextPage","lastParagrapSectPr","paragraphLoop","level","p","firstChunk","lastChunk","firstOffset","lastOffset","hasPageBreakBeginning","resolve","options","sm","scopeManager","promisedValue","getValueAsync","promises","loopOver","scope","createSubScopeManager","compiled","errorList","then","values","nullGetter","Promise","all","loopOverValue","_ref7","resolved","errors","render","position","lastExt","totalValue","heightOffset","self","firstTag","tagHeight","a16RowIdOffset","insideParagraphLoop","_i0","_part$subparsed2","pp","val","isNotFirst","scopePathItem","_i10","_subRendered$parts2","_val","getValue","cy","joinUncorrupt","exports"],"sources":["/home/ali/Desktop/applications/node_modules/docxtemplater/js/modules/loop.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar _require = require(\"../doc-utils.js\"),\n  chunkBy = _require.chunkBy,\n  last = _require.last,\n  isParagraphStart = _require.isParagraphStart,\n  isModule = _require.isModule,\n  pushArray = _require.pushArray,\n  isParagraphEnd = _require.isParagraphEnd,\n  isContent = _require.isContent,\n  startsWith = _require.startsWith,\n  isTagEnd = _require.isTagEnd,\n  isTagStart = _require.isTagStart,\n  getSingleAttribute = _require.getSingleAttribute,\n  setSingleAttribute = _require.setSingleAttribute;\nvar filetypes = require(\"../filetypes.js\");\nvar wrapper = require(\"../module-wrapper.js\");\nvar moduleName = \"loop\";\nfunction hasContent(parts) {\n  return parts.some(function (part) {\n    return isContent(part);\n  });\n}\nfunction getFirstMeaningFulPart(parsed) {\n  for (var _i2 = 0; _i2 < parsed.length; _i2++) {\n    var part = parsed[_i2];\n    if (part.type !== \"content\") {\n      return part;\n    }\n  }\n  return null;\n}\nfunction isInsideParagraphLoop(part) {\n  var firstMeaningfulPart = getFirstMeaningFulPart(part.subparsed);\n  return firstMeaningfulPart != null && firstMeaningfulPart.tag !== \"w:t\";\n}\nfunction getPageBreakIfApplies(part) {\n  return part.hasPageBreak && isInsideParagraphLoop(part) ? '<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>' : \"\";\n}\nfunction isEnclosedByParagraphs(parsed) {\n  return parsed.length && isParagraphStart(parsed[0]) && isParagraphEnd(last(parsed));\n}\nfunction getOffset(chunk) {\n  return hasContent(chunk) ? 0 : chunk.length;\n}\nfunction addPageBreakAtEnd(subRendered) {\n  var j = subRendered.parts.length - 1;\n  if (subRendered.parts[j] === \"</w:p>\") {\n    subRendered.parts.splice(j, 0, '<w:r><w:br w:type=\"page\"/></w:r>');\n  } else {\n    subRendered.parts.push('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n  }\n}\nfunction addPageBreakAtBeginning(subRendered) {\n  subRendered.parts.unshift('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n}\nfunction isContinuous(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf(\"continuous\") !== -1;\n  });\n}\nfunction isNextPage(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf('w:val=\"nextPage\"') !== -1;\n  });\n}\nfunction addSectionBefore(parts, sect) {\n  return pushArray([\"<w:p><w:pPr>\".concat(sect.map(function (_ref) {\n    var value = _ref.value;\n    return value;\n  }).join(\"\"), \"</w:pPr></w:p>\")], parts);\n}\nfunction addContinuousType(parts) {\n  var stop = false;\n  var inSectPr = false;\n  var result = [];\n  for (var _i4 = 0; _i4 < parts.length; _i4++) {\n    var part = parts[_i4];\n    if (stop === false && startsWith(part, \"<w:sectPr\")) {\n      inSectPr = true;\n    }\n    if (inSectPr) {\n      if (startsWith(part, \"<w:type\")) {\n        stop = true;\n      }\n      if (stop === false && startsWith(part, \"</w:sectPr\")) {\n        result.push('<w:type w:val=\"continuous\"/>');\n      }\n    }\n    result.push(part);\n  }\n  return result;\n}\nfunction dropHeaderFooterRefs(parts) {\n  return parts.filter(function (text) {\n    return !startsWith(text, \"<w:headerReference\") && !startsWith(text, \"<w:footerReference\");\n  });\n}\nfunction hasPageBreak(chunk) {\n  return chunk.some(function (part) {\n    return part.tag === \"w:br\" && part.value.indexOf('w:type=\"page\"') !== -1;\n  });\n}\nfunction hasImage(chunk) {\n  return chunk.some(function (_ref2) {\n    var tag = _ref2.tag;\n    return tag === \"w:drawing\";\n  });\n}\nfunction getSectPr(chunks) {\n  var collectSectPr = false;\n  var sectPrs = [];\n  for (var _i6 = 0; _i6 < chunks.length; _i6++) {\n    var part = chunks[_i6];\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPrs.push([]);\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      sectPrs[sectPrs.length - 1].push(part);\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  }\n  return sectPrs;\n}\nfunction getSectPrHeaderFooterChangeCount(chunks) {\n  var collectSectPr = false;\n  var sectPrCount = 0;\n  for (var _i8 = 0; _i8 < chunks.length; _i8++) {\n    var part = chunks[_i8];\n    if (isTagStart(\"w:sectPr\", part)) {\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      if (part.tag === \"w:headerReference\" || part.tag === \"w:footerReference\") {\n        sectPrCount++;\n        collectSectPr = false;\n      }\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  }\n  return sectPrCount;\n}\nfunction getLastSectPr(parsed) {\n  var sectPr = [];\n  var inSectPr = false;\n  for (var i = parsed.length - 1; i >= 0; i--) {\n    var part = parsed[i];\n    if (isTagEnd(\"w:sectPr\", part)) {\n      inSectPr = true;\n    }\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPr.unshift(part.value);\n      inSectPr = false;\n    }\n    if (inSectPr) {\n      sectPr.unshift(part.value);\n    }\n    if (isParagraphStart(part)) {\n      if (sectPr.length > 0) {\n        return sectPr.join(\"\");\n      }\n      break;\n    }\n  }\n  return \"\";\n}\nvar LoopModule = /*#__PURE__*/function () {\n  function LoopModule() {\n    _classCallCheck(this, LoopModule);\n    this.name = \"LoopModule\";\n    this.inXfrm = false;\n    this.totalSectPr = 0;\n    this.prefix = {\n      start: \"#\",\n      end: \"/\",\n      dash: /^-([^\\s]+)\\s(.+)/,\n      inverted: \"^\"\n    };\n  }\n  return _createClass(LoopModule, [{\n    key: \"optionsTransformer\",\n    value: function optionsTransformer(opts, docxtemplater) {\n      this.docxtemplater = docxtemplater;\n      return opts;\n    }\n  }, {\n    key: \"preparse\",\n    value: function preparse(parsed, _ref3) {\n      var contentType = _ref3.contentType;\n      if (filetypes.main.indexOf(contentType) !== -1) {\n        this.sects = getSectPr(parsed);\n      }\n    }\n  }, {\n    key: \"matchers\",\n    value: function matchers() {\n      var module = moduleName;\n      return [[this.prefix.start, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: false\n      }], [this.prefix.inverted, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: true\n      }], [this.prefix.end, module, {\n        location: \"end\"\n      }], [this.prefix.dash, module, function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 3),\n          expandTo = _ref5[1],\n          value = _ref5[2];\n        return {\n          location: \"start\",\n          inverted: false,\n          expandTo: expandTo,\n          value: value\n        };\n      }]];\n    }\n  }, {\n    key: \"getTraits\",\n    value: function getTraits(traitName, parsed) {\n      // Stryker disable all : because getTraits should disappear in v4\n      if (traitName !== \"expandPair\") {\n        return;\n      }\n      // Stryker restore all\n\n      var tags = [];\n      for (var offset = 0, len = parsed.length; offset < len; offset++) {\n        var part = parsed[offset];\n        if (isModule(part, moduleName) && part.subparsed == null) {\n          tags.push({\n            part: part,\n            offset: offset\n          });\n        }\n      }\n      return tags;\n    }\n  }, {\n    key: \"postparse\",\n    value: function postparse(parsed, _ref6) {\n      var basePart = _ref6.basePart;\n      if (basePart && this.docxtemplater.fileType === \"docx\" && parsed.length > 0) {\n        basePart.sectPrCount = getSectPrHeaderFooterChangeCount(parsed);\n        this.totalSectPr += basePart.sectPrCount;\n        var sects = this.sects;\n        sects.some(function (sect, index) {\n          if (basePart.lIndex < sect[0].lIndex) {\n            if (index + 1 < sects.length && isContinuous(sects[index + 1])) {\n              basePart.addContinuousType = true;\n            }\n            return true;\n          }\n          if (parsed[0].lIndex < sect[0].lIndex && sect[0].lIndex < basePart.lIndex) {\n            if (isNextPage(sects[index])) {\n              basePart.addNextPage = {\n                index: index\n              };\n            }\n            return true;\n          }\n        });\n        basePart.lastParagrapSectPr = getLastSectPr(parsed);\n      }\n      if (!basePart || basePart.expandTo !== \"auto\" || basePart.module !== moduleName || !isEnclosedByParagraphs(parsed)) {\n        return parsed;\n      }\n      basePart.paragraphLoop = true;\n      var level = 0;\n      var chunks = chunkBy(parsed, function (p) {\n        if (isParagraphStart(p)) {\n          level++;\n          if (level === 1) {\n            return \"start\";\n          }\n        }\n        if (isParagraphEnd(p)) {\n          level--;\n          if (level === 0) {\n            return \"end\";\n          }\n        }\n        return null;\n      });\n      var firstChunk = chunks[0];\n      var lastChunk = last(chunks);\n      var firstOffset = getOffset(firstChunk);\n      var lastOffset = getOffset(lastChunk);\n      basePart.hasPageBreakBeginning = hasPageBreak(firstChunk);\n      basePart.hasPageBreak = hasPageBreak(lastChunk);\n      if (hasImage(firstChunk)) {\n        firstOffset = 0;\n      }\n      if (hasImage(lastChunk)) {\n        lastOffset = 0;\n      }\n      return parsed.slice(firstOffset, parsed.length - lastOffset);\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(part, options) {\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var sm = options.scopeManager;\n      var promisedValue = sm.getValueAsync(part.value, {\n        part: part\n      });\n      var promises = [];\n      function loopOver(scope, i, length) {\n        var scopeManager = sm.createSubScopeManager(scope, part.value, i, part, length);\n        promises.push(options.resolve(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        })));\n      }\n      var errorList = [];\n      return promisedValue.then(function (values) {\n        values !== null && values !== void 0 ? values : values = options.nullGetter(part);\n        return new Promise(function (resolve) {\n          if (values instanceof Promise) {\n            return values.then(function (values) {\n              if (values instanceof Array) {\n                Promise.all(values).then(resolve);\n              } else {\n                resolve(values);\n              }\n            });\n          }\n          if (values instanceof Array) {\n            Promise.all(values).then(resolve);\n          } else {\n            resolve(values);\n          }\n        }).then(function (values) {\n          sm.loopOverValue(values, loopOver, part.inverted);\n          return Promise.all(promises).then(function (r) {\n            return r.map(function (_ref7) {\n              var resolved = _ref7.resolved,\n                errors = _ref7.errors;\n              pushArray(errorList, errors);\n              return resolved;\n            });\n          }).then(function (value) {\n            if (errorList.length > 0) {\n              throw errorList;\n            }\n            return value;\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render(part, options) {\n      if (part.tag === \"p:xfrm\") {\n        this.inXfrm = part.position === \"start\";\n      }\n      if (part.tag === \"a:ext\" && this.inXfrm) {\n        this.lastExt = part;\n        return part;\n      }\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var totalValue = [];\n      var errors = [];\n      var heightOffset = 0;\n      var self = this;\n      var firstTag = part.subparsed[0];\n      var tagHeight = 0;\n      if ((firstTag === null || firstTag === void 0 ? void 0 : firstTag.tag) === \"a:tr\") {\n        tagHeight = +getSingleAttribute(firstTag.value, \"h\");\n      }\n      heightOffset -= tagHeight;\n      var a16RowIdOffset = 0;\n      var insideParagraphLoop = isInsideParagraphLoop(part);\n      function loopOver(scope, i, length) {\n        heightOffset += tagHeight;\n        var scopeManager = options.scopeManager.createSubScopeManager(scope, part.value, i, part, length);\n        for (var _i0 = 0, _part$subparsed2 = part.subparsed; _i0 < _part$subparsed2.length; _i0++) {\n          var pp = _part$subparsed2[_i0];\n          if (isTagStart(\"a16:rowId\", pp)) {\n            var val = +getSingleAttribute(pp.value, \"val\") + a16RowIdOffset;\n            a16RowIdOffset = 1;\n            pp.value = setSingleAttribute(pp.value, \"val\", val);\n          }\n        }\n        var subRendered = options.render(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        }));\n        if (part.hasPageBreak && i === length - 1 && insideParagraphLoop) {\n          addPageBreakAtEnd(subRendered);\n        }\n        var isNotFirst = scopeManager.scopePathItem.some(function (i) {\n          return i !== 0;\n        });\n        if (isNotFirst) {\n          if (part.sectPrCount === 1) {\n            subRendered.parts = dropHeaderFooterRefs(subRendered.parts);\n          }\n          if (part.addContinuousType) {\n            subRendered.parts = addContinuousType(subRendered.parts);\n          }\n        } else if (part.addNextPage) {\n          subRendered.parts = addSectionBefore(subRendered.parts, self.sects[part.addNextPage.index]);\n        }\n        if (part.addNextPage) {\n          addPageBreakAtEnd(subRendered);\n        }\n        if (part.hasPageBreakBeginning && insideParagraphLoop) {\n          addPageBreakAtBeginning(subRendered);\n        }\n        for (var _i10 = 0, _subRendered$parts2 = subRendered.parts; _i10 < _subRendered$parts2.length; _i10++) {\n          var _val = _subRendered$parts2[_i10];\n          totalValue.push(_val);\n        }\n        pushArray(errors, subRendered.errors);\n      }\n      var value = options.scopeManager.getValue(part.value, {\n        part: part\n      });\n      value !== null && value !== void 0 ? value : value = options.nullGetter(part);\n      var result = options.scopeManager.loopOverValue(value, loopOver, part.inverted);\n      // if the loop is showing empty content\n      if (result === false) {\n        if (part.lastParagrapSectPr) {\n          if (part.paragraphLoop) {\n            return {\n              value: \"<w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr></w:p>\")\n            };\n          }\n          return {\n            value: \"</w:t></w:r></w:p><w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr><w:r><w:t>\")\n          };\n        }\n        return {\n          value: getPageBreakIfApplies(part) || \"\",\n          errors: errors\n        };\n      }\n      if (heightOffset !== 0) {\n        var cy = +getSingleAttribute(this.lastExt.value, \"cy\");\n        /*\n         * We do edit the value of a previous result here\n         * #edit-value-backwards\n         */\n        this.lastExt.value = setSingleAttribute(this.lastExt.value, \"cy\", cy + heightOffset);\n      }\n      return {\n        value: options.joinUncorrupt(totalValue, _objectSpread(_objectSpread({}, options), {}, {\n          basePart: part\n        })),\n        errors: errors\n      };\n    }\n  }]);\n}();\nmodule.exports = function () {\n  return wrapper(new LoopModule());\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}